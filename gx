--// üî• AutoFarm Slayer + Tanjiro + Zoom Top-Down üî•
--// by ‡∏Å‡∏±‡∏ô

--===[ Settings ]===--
local QUEST_CFRAME = CFrame.new(-533.615845, 11.164134, 535.633545)
local ISLAND = "Forge Isle"

--===[ Services ]===--
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local Remotes = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Serverside")

--===[ UI Setup ]===--
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "FarmUI"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 220, 0, 150)
frame.Position = UDim2.new(0.8, 0, 0.6, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.BackgroundTransparency = 0.1
frame.Active = true
frame.Draggable = true

local function makeButton(name, order)
	local btn = Instance.new("TextButton", frame)
	btn.Size = UDim2.new(1, -20, 0, 40)
	btn.Position = UDim2.new(0, 10, 0, (order - 1) * 45 + 10)
	btn.Text = name
	btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 16
	btn.AutoButtonColor = true
	btn.BorderSizePixel = 0
	return btn
end

local zoomBtn = makeButton("Auto Zoom ‚ùå", 1)
local slayerBtn = makeButton("Auto Slayer ‚ùå", 2)
local tanjiroBtn = makeButton("Auto Tanjiro ‚ùå", 3)

--===[ Global States ]===--
getgenv().AutoZoom = false
getgenv().AutoSlayer = false
getgenv().AutoTanjiro = false

--===[ HoldDuration 0 ]===--
for _, obj in pairs(workspace:GetDescendants()) do
	if obj:IsA("ProximityPrompt") then
		obj.HoldDuration = 0
	end
end

--===[ Helpers ]===--
local function findEnemy(name)
	local path = workspace.Main.Characters[ISLAND]
	for _,v in pairs(path:GetDescendants()) do
		if v.Name == name and v:FindFirstChild("HumanoidRootPart") and v:FindFirstChild("Humanoid") then
			return v
		end
	end
	return nil
end

local function attack(target)
	if target and target:FindFirstChild("HumanoidRootPart") then
		player.Character:MoveTo(target.HumanoidRootPart.Position + Vector3.new(0,2,0))
		Remotes:FireServer("Server","Sword","M1s","Dual Dagger",1)
		Remotes:FireServer("Server","Sword","Skill1","Dual Dagger")
	end
end

local function teleportToQuest()
	if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		player.Character.HumanoidRootPart.CFrame = QUEST_CFRAME
	end
end

--===[ Auto Zoom Top-Down ]===--
RunService.RenderStepped:Connect(function()
	if getgenv().AutoZoom then
		local char = player.Character
		if char and char:FindFirstChild("HumanoidRootPart") and char:FindFirstChild("Head") then
			local hrp = char.HumanoidRootPart
			local head = char.Head
			workspace.CurrentCamera.CameraType = Enum.CameraType.Scriptable
			local camPos = hrp.Position + Vector3.new(0,50,0) -- ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏´‡∏±‡∏ß
			workspace.CurrentCamera.CFrame = CFrame.new(camPos, head.Position)
		end
	else
		if player.Character and player.Character:FindFirstChild("Humanoid") then
			workspace.CurrentCamera.CameraType = Enum.CameraType.Custom
			workspace.CurrentCamera.CameraSubject = player.Character:FindFirstChild("Humanoid")
		end
	end
end)

--===[ Auto Slayer Loop ]===--
task.spawn(function()
	while task.wait(0.5) do
		if getgenv().AutoSlayer then
			local mob = findEnemy("Slayer's Trainee")
			if mob then attack(mob) end
		end
	end
end)

--===[ Auto Tanjiro Loop ]===--
task.spawn(function()
	while task.wait(0.5) do
		if getgenv().AutoTanjiro then
			local boss = findEnemy("Tanjiro")
			if not boss then
				teleportToQuest()
			else
				attack(boss)
			end
		end
	end
end)

--===[ Buttons Functions ]===--
zoomBtn.MouseButton1Click:Connect(function()
	getgenv().AutoZoom = not getgenv().AutoZoom
	zoomBtn.Text = "Auto Zoom " .. (getgenv().AutoZoom and "‚úÖ" or "‚ùå")
	zoomBtn.BackgroundColor3 = getgenv().AutoZoom and Color3.fromRGB(0,150,0) or Color3.fromRGB(70,70,70)
end)

slayerBtn.MouseButton1Click:Connect(function()
	getgenv().AutoSlayer = not getgenv().AutoSlayer
	slayerBtn.Text = "Auto Slayer " .. (getgenv().AutoSlayer and "‚úÖ" or "‚ùå")
	slayerBtn.BackgroundColor3 = getgenv().AutoSlayer and Color3.fromRGB(0,150,0) or Color3.fromRGB(70,70,70)
end)

tanjiroBtn.MouseButton1Click:Connect(function()
	getgenv().AutoTanjiro = not getgenv().AutoTanjiro
	tanjiroBtn.Text = "Auto Tanjiro " .. (getgenv().AutoTanjiro and "‚úÖ" or "‚ùå")
	tanjiroBtn.BackgroundColor3 = getgenv().AutoTanjiro and Color3.fromRGB(0,150,0) or Color3.fromRGB(70,70,70)
	if getgenv().AutoTanjiro then
		teleportToQuest()
	end
end)
