--// üî• AutoFarm Slayer + Tanjiro + Zoom Top-Down + TP Quest üîÅ (No CD + UI Fixed) üî•
--// by ‡∏Å‡∏±‡∏ô

--===[ Settings ]===--
local QUEST_CFRAME = CFrame.new(-460.4409484863281, 10.964144706726074, 487.0525207519531) -- ‡∏à‡∏∏‡∏î‡πÄ‡∏Ñ‡∏ß‡∏™
local TANJIRO_CFRAME = CFrame.new(-533.615845, 11.164134, 535.633545) -- ‡∏à‡∏∏‡∏î‡∏ö‡∏≠‡∏™ Tanjiro
local ISLAND = "Forge Isle"

--===[ Services ]===--
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local Remotes = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Serverside")
local camera = workspace.CurrentCamera

--===[ Global States ]===--
local AutoSlayer = false
local AutoTanjiro = false
local AutoZoom = false
local TPQuest = false

--===[ UI Setup ]===--
local gui = Instance.new("ScreenGui")
gui.Name = "FarmUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 220, 0, 200)
frame.Position = UDim2.new(0.8, 0, 0.55, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.2
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.ZIndex = 2

local corner = Instance.new("UICorner", frame)
corner.CornerRadius = UDim.new(0, 12)

local function makeButton(name, order)
	local btn = Instance.new("TextButton", frame)
	btn.Size = UDim2.new(1, -20, 0, 40)
	btn.Position = UDim2.new(0, 10, 0, (order-1)*45 + 5)
	btn.Text = name
	btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 16
	btn.BorderSizePixel = 0
	btn.AutoButtonColor = true
	btn.ZIndex = 3
	local cornerBtn = Instance.new("UICorner", btn)
	cornerBtn.CornerRadius = UDim.new(0, 10)
	return btn
end

--===[ Buttons ]===--
local btnAutoSlayer = makeButton("Auto Slayer ‚ùå", 1)
local btnTanjiro = makeButton("Auto Tanjiro ‚ùå", 2)
local btnZoom = makeButton("Top-Down Zoom ‚ùå", 3)
local btnTPQuest = makeButton("Teleport Quest ‚ùå", 4)

--===[ Haki Function ]===--
local HakiArgs = {"Server","Misc","Haki",1}
local function ActivateHaki()
	pcall(function()
		Remotes:FireServer(unpack(HakiArgs))
	end)
end

--===[ Helpers ]===--
local function waitForCharacter()
	local char, hrp, humanoid
	repeat
		char = player.Character or player.CharacterAdded:Wait()
		hrp = char:FindFirstChild("HumanoidRootPart")
		humanoid = char:FindFirstChild("Humanoid")
		task.wait(0.1)
	until hrp and humanoid and humanoid.Health > 0
	return char, hrp, humanoid
end

local function findEnemy(name)
	local path = workspace.Main.Characters[ISLAND]
	for _,v in pairs(path:GetDescendants()) do
		if v.Name == name and v:FindFirstChild("HumanoidRootPart") and v:FindFirstChild("Humanoid") then
			return v
		end
	end
	return nil
end

--===[ Attack Function ]===--
local function attack(target)
	pcall(function()
		if target and target:FindFirstChild("HumanoidRootPart") then
			local char, hrp = waitForCharacter()
			local hrpTarget = target.HumanoidRootPart
			task.wait(0.15)
			hrp.CFrame = hrpTarget.CFrame * CFrame.new(0, 0, 5)
			Remotes:FireServer("Server","Sword","M1s","Dual Dagger",1)
			task.wait(0.15)
			for i = 1, 4 do
				Remotes:FireServer("Server","Sword","Skill"..i,"Dual Dagger", hrpTarget.Position)
				task.wait(0.15)
			end
			ActivateHaki()
		end
	end)
end

--===[ Teleport Functions ]===--
local function teleportToQuest()
	if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		player.Character.HumanoidRootPart.CFrame = QUEST_CFRAME
	end
end

local function teleportToTanjiro()
	if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		player.Character.HumanoidRootPart.CFrame = TANJIRO_CFRAME
	end
end

--===[ Auto Loops ]===--
task.spawn(function()
	while true do
		if AutoSlayer then
			local mob = findEnemy("Slayer's Trainee")
			if mob then attack(mob) end
		end
		if AutoTanjiro then
			local boss = findEnemy("Tanjiro")
			if boss then attack(boss)
			else teleportToTanjiro() end
		end
		if TPQuest then teleportToQuest() end
		ActivateHaki()
		task.wait(0.5)
	end
end)

--===[ Auto Zoom ]===--
RunService.RenderStepped:Connect(function()
	if AutoZoom then
		local char = player.Character
		if char and char:FindFirstChild("HumanoidRootPart") and char:FindFirstChild("Head") then
			camera.CameraType = Enum.CameraType.Scriptable
			local camPos = char.HumanoidRootPart.Position + Vector3.new(0,50,0)
			camera.CFrame = CFrame.new(camPos, char.Head.Position)
		else
			camera.CameraType = Enum.CameraType.Custom
			camera.CameraSubject = player.Character:FindFirstChild("Humanoid")
		end
	end
end)

--===[ Buttons Connect ]===--
btnAutoSlayer.MouseButton1Click:Connect(function()
	AutoSlayer = not AutoSlayer
	btnAutoSlayer.Text = "Auto Slayer " .. (AutoSlayer and "‚úÖ" or "‚ùå")
	btnAutoSlayer.BackgroundColor3 = AutoSlayer and Color3.fromRGB(0,150,0) or Color3.fromRGB(70,70,70)
end)

btnTanjiro.MouseButton1Click:Connect(function()
	AutoTanjiro = not AutoTanjiro
	btnTanjiro.Text = "Auto Tanjiro " .. (AutoTanjiro and "‚úÖ" or "‚ùå")
	btnTanjiro.BackgroundColor3 = AutoTanjiro and Color3.fromRGB(0,150,0) or Color3.fromRGB(70,70,70)
end)

btnZoom.MouseButton1Click:Connect(function()
	AutoZoom = not AutoZoom
	btnZoom.Text = "Top-Down Zoom " .. (AutoZoom and "‚úÖ" or "‚ùå")
	btnZoom.BackgroundColor3 = AutoZoom and Color3.fromRGB(0,150,0) or Color3.fromRGB(70,70,70)
end)

btnTPQuest.MouseButton1Click:Connect(function()
	TPQuest = not TPQuest
	btnTPQuest.Text = "Teleport Quest " .. (TPQuest and "‚úÖ" or "‚ùå")
	btnTPQuest.BackgroundColor3 = TPQuest and Color3.fromRGB(0,150,0) or Color3.fromRGB(70,70,70)
end)
